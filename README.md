# emby_sync
主要功能
该脚本的核心作用是 监控您本地的媒体文件目录，并实时通知 Emby 服务器刷新媒体库，从而实现媒体库的自动更新。

具体来说，它能：

实时监控：使用 watchdog 库监控您指定的 /media 目录及其子目录。

事件驱动：当检测到文件或目录的 新增、修改或删除 事件时，立即响应。

智能过滤：

忽略非媒体文件：支持通过文件后缀黑白名单来过滤不相关的变动（如 .nfo, .log 等），只关注媒体文件。

避免重复刷新：在短时间内发生多次文件变动时，只会触发一次刷新请求，通过 冷却（cooldown）机制 减轻 Emby 服务器的负担。

异步高效：使用 asyncio 和 httpx 进行异步网络请求，确保在等待 Emby 响应时，脚本不会被阻塞，能够继续监控其他文件变动。

健壮可靠：

使用线程安全的方式将文件系统事件从 watchdog 线程安全地传递给主 asyncio 事件循环。

提供详细的日志记录（支持日志轮转），便于追踪和调试。

支持优雅退出，确保所有任务在程序关闭前都能被正确处理。
